<section id="reviews" class="bg-lighter-custom py-5 text-center">
	<div class="container">
		<h2 class="text-center mb-4 display-4"><%= __('reviews.title') %></h2>

		<% if (reviews && reviews.length > 0) { %>
		<div
			id="reviewsCarousel"
			class="carousel slide"
			data-bs-ride="carousel"
		>
			<!-- Indicators -->
			<div class="carousel-indicators">
				<% reviews.forEach((_, index) => { %>
				<button
					type="button"
					data-bs-target="#reviewsCarousel"
					data-bs-slide-to="<%= index %>"
					class="<%= index === 0 ? 'active' : '' %>"
					aria-label="Slide <%= index + 1 %>"
				></button>
				<% }) %>
			</div>

			<!-- Review Slides -->
			<div class="carousel-inner">
				<% reviews.forEach((review, index) => { %>
				<div class="carousel-item <%= index === 0 ? 'active' : '' %>">
					<div
						class="card p-4 shadow-sm text-center mx-auto"
						style="max-width: 600px"
					>
						<div
							class="d-flex justify-content-center align-items-center gap-3 mb-3"
						>
							<img
								src="<%= review.profile_photo_url %>"
								alt="<%= review.author_name %>"
								class="rounded-circle"
								width="60"
								height="60"
								referrerpolicy="no-referrer"
								loading="lazy"
							/>
							<div class="star-rating">
								<% for (let i = 0; i < (review.rating || 0);
								i++) { %>
								<i class="bi bi-star-fill"></i>
								<% } %>
							</div>
						</div>

						<blockquote class="blockquote mb-2">
							<p>“<%= review.text %>”</p>
						</blockquote>
						<footer class="blockquote-footer">
							<%= review.author_name %>
							<img
								src="/images/icons/google.svg"
								alt="Google"
								width="16"
								class="ms-1"
								alt="Google logo"
							/>
						</footer>
					</div>
				</div>
				<% }) %>
			</div>

			<!-- Controls -->
			<button
				class="carousel-control-prev"
				type="button"
				data-bs-target="#reviewsCarousel"
				data-bs-slide="prev"
			>
				<span
					class="carousel-control-prev-icon"
					aria-hidden="true"
				></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button
				class="carousel-control-next"
				type="button"
				data-bs-target="#reviewsCarousel"
				data-bs-slide="next"
			>
				<span
					class="carousel-control-next-icon"
					aria-hidden="true"
				></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>

		<% } else { %>
		<p class="text-center text-muted"><%= __('reviews.none') %></p>
		<% } %>
	</div>
</section>
